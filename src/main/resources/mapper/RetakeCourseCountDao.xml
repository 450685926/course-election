<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.server.edu.election.dao.RetakeCourseCountDao">

    <resultMap id="BaseResultMap" type="com.server.edu.election.vo.RetakeCourseCountVo">
        <result column="ID_" jdbcType="BIGINT" property="id" />
        <result column="TRAINING_LEVEL_" jdbcType="VARCHAR" property="trainingLevel" />
        <result column="TRAINING_CATEGORY_" jdbcType="VARCHAR" property="trainingCategory" />
        <result column="DEGREE_TYPE_" jdbcType="VARCHAR" property="degreeType" />
        <result column="FORM_LEARNING_" jdbcType="VARCHAR" property="formLearning" />
        <result column="RETAKE_COUNT_" jdbcType="INTEGER" property="retakeCount" />
        <result column="PROJECT_NAME_" jdbcType="VARCHAR" property="projectName" />
    </resultMap>

    <select id="findRetakeCourseCountList" parameterType="com.server.edu.election.vo.RetakeCourseCountVo" resultMap="BaseResultMap">
        select * from elc_retake_course_count
        <where>
            DELETE_STATUS_ = 0
        <if test="trainingLevel != null and trainingLevel != ''">
            and TRAINING_LEVEL_ = #{trainingLevel}
        </if>
        <if test="trainingCategory != null and trainingCategory != ''">
            and TRAINING_CATEGORY_ = #{trainingCategory}
        </if>
        <if test="degreeType != null and degreeType != ''">
            and  DEGREE_TYPE_ = #{degreeType}
        </if>
        <if test="formLearning != null and formLearning != ''">
            and FORM_LEARNING_ = #{formLearning}
        </if>
        <if test="retakeCount != null">
            and RETAKE_COUNT_ = #{retakeCount}
        </if>
        </where>
    </select>

    <insert id = "saveRetakeCourseCount">
        insert into elc_retake_course_count
              (TRAINING_LEVEL_,TRAINING_CATEGORY_,DEGREE_TYPE_,FORM_LEARNING_,RETAKE_COUNT_,PROJECT_NAME_,DELETE_STATUS_)
        values
              (#{trainingLevel},#{trainingCategory},#{degreeType},#{formLearning},#{retakeCount},#{projectName},#{status})
    </insert>

    <update id="updateRetakeCourseCount">
        update
              elc_retake_course_count
        set
            TRAINING_LEVEL_ = #{trainingLevel},
            TRAINING_CATEGORY_ = #{trainingCategory},
            DEGREE_TYPE_ = #{degreeType},
            FORM_LEARNING_ = #{formLearning},
            RETAKE_COUNT_ = #{retakeCount},
            PROJECT_NAME_ = #{projectName},
            DELETE_STATUS_ = #{status}
        where
            ID_ = #{id}
    </update>

    <update id="deleteRetakeCourseCount">
        update
          elc_retake_course_count
        set
          DELETE_STATUS_ = 1
        where ID_ in
        <foreach collection="ids" open="(" separator="," close=")" item="id">
            #{id}
        </foreach>
    </update>

    <select id="findRetakeCount" parameterType="com.server.edu.election.entity.Student" resultType="java.lang.Integer">
         select RETAKE_COUNT_ from elc_retake_course_count
         where
            DELETE_STATUS_ = 0
         and TRAINING_LEVEL_ = #{trainingLevel}
         and TRAINING_CATEGORY_ = #{trainingCategory}
         and DEGREE_TYPE_ = #{degreeType}
         and FORM_LEARNING_ = #{formLearning}
    </select>

    <select id="findProjectName" parameterType="com.server.edu.election.vo.RetakeCourseCountVo" resultType="java.lang.String">
         select PROJECT_NAME_ from elc_retake_course_count
         where
            DELETE_STATUS_ = 0
         and TRAINING_LEVEL_ = #{trainingLevel}
         and TRAINING_CATEGORY_ = #{trainingCategory}
         and DEGREE_TYPE_ = #{degreeType}
         and FORM_LEARNING_ = #{formLearning}
    </select>
</mapper>