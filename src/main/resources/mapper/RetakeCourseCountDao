<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.server.edu.election.dao.RetakeCourseCountDao">

    <resultMap id="BaseResultMap" type="com.server.edu.election.vo.RetakeCourseCountVo">
        <result column="ID_" jdbcType="BIGINT" property="id" />
        <result column="TRAINING_LEVEL_" jdbcType="VARCHAR" property="trainingLevel" />
        <result column="TRAINING_CATEGORY_" jdbcType="VARCHAR" property="trainingCategory" />
        <result column="DEGREE_TYPE_" jdbcType="VARCHAR" property="degreeType" />
        <result column="FORM_LEARNING_" jdbcType="VARCHAR" property="formLearning" />
        <result column="RETAKE_COUNT_" jdbcType="INTEGER" property="retakeCount" />
        <result column="MANAGER_DEPT_ID_" jdbcType="VARCHAR" property="managerDeptId" />
    </resultMap>

    <select id="findRetakeCourseCountList" parameterType="com.server.edu.election.vo.RetakeCourseCountVo" resultMap="BaseResultMap">
        select
        ID_,TRAINING_LEVEL_,TRAINING_CATEGORY_,DEGREE_TYPE_,FORM_LEARNING_,RETAKE_COUNT_,MANAGER_DEPT_ID_
        from
            elc_retake_course_count
        <where>
        <if test="trainingLevel != null and trainingLevel != ''">
            TRAINING_LEVEL_ = #{trainingLevel}
        </if>
        <if test="trainingCategory != null and trainingCategory != ''">
            and TRAINING_CATEGORY_ = #{trainingCategory}
        </if>
        <if test="degreeType != null and degreeType != ''">
            and  DEGREE_TYPE_ = #{degreeType}
        </if>
        <if test="formLearning != null and formLearning != ''">
            and FORM_LEARNING_ = #{formLearning}
        </if>
        <if test="retakeCount != null">
            and RETAKE_COUNT_ = #{retakeCount}
        </if>
        </where>
    </select>

    <insert id = "saveRetakeCourseCount">
        insert into elc_retake_course_count
              (TRAINING_LEVEL_,TRAINING_CATEGORY_,DEGREE_TYPE_,FORM_LEARNING_,RETAKE_COUNT_,MANAGER_DEPT_ID_)
        values
              (#{trainingLevel},#{trainingCategory},#{degreeType},#{formLearning},#{retakeCount},#{managerDeptId})
    </insert>

    <update id="updateRetakeCourseCount">
        update
              elc_retake_course_count
        set
            TRAINING_LEVEL_ = #{trainingLevel},
            TRAINING_CATEGORY_ = #{trainingCategory},
            DEGREE_TYPE_ = #{degreeType},
            FORM_LEARNING_ = #{formLearning},
            RETAKE_COUNT_ = #{retakeCount},
            MANAGER_DEPT_ID_ = #{managerDeptId})
        where
            ID_ = #{id}
    </update>
</mapper>