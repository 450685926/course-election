<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.server.edu.election.dao.ElcLogDao">
  <resultMap id="BaseResultMap" type="com.server.edu.election.entity.ElcLog">
    <!--
      WARNING - @mbg.generated
    -->
    <id column="ID_" jdbcType="BIGINT" property="id" />
    <result column="STUDENT_ID_" jdbcType="VARCHAR" property="studentId" />
    <result column="COURSE_CODE_" jdbcType="VARCHAR" property="courseCode" />
    <result column="COURSE_NAME_" jdbcType="VARCHAR" property="courseName" />
    <result column="TEACHING_CLASS_CODE_" jdbcType="VARCHAR" property="teachingClassCode" />
    <result column="CALENDAR_ID_" jdbcType="BIGINT" property="calendarId" />
    <result column="TYPE_" jdbcType="INTEGER" property="type" />
    <result column="MODE_" jdbcType="INTEGER" property="mode" />
    <result column="TURN_" jdbcType="INTEGER" property="turn" />
    <result column="CREATE_BY_" jdbcType="VARCHAR" property="createBy" />
    <result column="CREATE_IP_" jdbcType="VARCHAR" property="createIp" />
    <result column="CREATED_AT_" jdbcType="TIMESTAMP" property="createdAt" />
    <result column="CREATE_NAME_" jdbcType="VARCHAR" property="createName" />

  </resultMap>
  
  <resultMap type="com.server.edu.election.vo.ElcLogVo" id="VoElcLogMap" extends="BaseResultMap">
  	<result column="NAME_" jdbcType="VARCHAR" property="studentName" />
  	<result column="CAMPUS_" jdbcType="VARCHAR" property="campus" />
  	<result column="PROFESSION_" jdbcType="VARCHAR" property="profession" />
  </resultMap>
  
  <select id="listPage" resultMap="VoElcLogMap">
  	select t1.*, t2.NAME_, t2.CAMPUS_, t2.PROFESSION_
  	from election_log_t t1 
  	left join student_t t2 ON t2.STUDENT_CODE_ = t1.STUDENT_ID_
  	<where>
  		t1.CALENDAR_ID_ =#{query.calendarId,jdbcType=BIGINT}
	  	<if test="@com.server.edu.util.MybatisUtil@isNotEmpty(query.studentId)">
	  	and t1.STUDENT_ID_ = #{query.studentId}
	  	</if>
	  	<if test="@com.server.edu.util.MybatisUtil@isNotEmpty(query.type)">
	  	and t1.TYPE_ = #{query.type}
	  	</if>
	  	<if test="@com.server.edu.util.MybatisUtil@isNotEmpty(query.mode)">
	  	and t1.MODE_ = #{query.mode}
	  	</if>
  	</where>
  </select>
  
</mapper>